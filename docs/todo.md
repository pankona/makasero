# 実装計画

## Phase 1: 基本構造の実装

### 1. プロジェクト初期化
- [ ] Goプロジェクトの初期化
  ```bash
  go mod init makasero
  ```
- [ ] 必要なパッケージの追加
  - Cobra (CLI)
  - Google Cloud Gemini API
  - XMLパーサー

### 2. コアコンポーネントの実装

#### 2.1 エージェントの基本構造
- [ ] `agent/agent.go`の作成
  - エージェントの基本インターフェース定義
  - 会話履歴の管理
  - Gemini APIとの通信
  - コンテキスト管理（Geminiの長いコンテキストを活用）

#### 2.2 基本ツールの実装
- [ ] `tools/list_file.go`の作成
  - ディレクトリ内のファイル一覧取得機能
  - 再帰的検索オプション

- [ ] `tools/read_file.go`の作成
  - ファイル内容の読み取り機能
  - パス検証

- [ ] `tools/complete.go`の作成
  - タスク完了の通知機能
  - 結果サマリーの生成

#### 2.3 CLIインターフェース
- [ ] `cmd/makasero/main.go`の作成
  - 基本的なコマンド構造
  - プロンプト入力の受け付け

### 3. テストの実装
- [ ] 各コンポーネントのユニットテスト
  - エージェントのテスト
  - ツールのテスト
  - CLIのテスト

## Phase 2: 動作確認

### 1. 基本的な対話フローのテスト
- [ ] ファイル一覧の取得
- [ ] ファイル内容の読み取り
- [ ] 結果の表示

### 2. エラーハンドリングの確認
- [ ] 無効なファイルパス
- [ ] LLM接続エラー
- [ ] XMLパースエラー

## 次のステップ（Phase 3以降）
1. コード解析機能の追加
2. コード生成機能の追加
3. テスト機能の追加
4. ドキュメント生成機能の追加

## 注意点
- 各フェーズで動作確認を行いながら進める
- エラーハンドリングを適切に実装する
- コードの可読性と保守性を重視する 